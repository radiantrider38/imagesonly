<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalist IQ Test</title>
    <style>
        /* --- Minimalist CSS Variables --- */
        :root {
            --primary-bg: #f7f9fc;
            --card-bg: #ffffff;
            --text-dark: #1f2937;
            --text-muted: #6b7280;
            --accent-blue: #3b82f6; /* Primary Action */
            --answered-color: #10b981; /* Green for answered */
            --unanswered-color: #e5e7eb; /* Light grey for unanswered */
            --current-color: #93c5fd; /* Light blue for current */
            --correct-color: #10b981;
            --wrong-color: #ef4444;
            --border-light: #e5e7eb;
            --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: var(--primary-bg);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 960px;
            width: 100%;
            margin: 20px auto;
            padding: 0 20px 80px 20px; /* Extra padding for fixed footer */
        }

        header h1 {
            text-align: center;
            color: var(--text-dark);
            margin: 20px 0 30px 0;
            font-weight: 700;
        }

        /* --- Header & Status Bar --- */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
            margin-bottom: 25px;
            border: 1px solid var(--border-light);
        }

        .timer, .questions-status {
            font-size: 1em;
            font-weight: 500;
            color: var(--text-dark);
        }

        .timer-display {
            color: var(--accent-blue);
            font-weight: 700;
        }

        /* --- Question Indicator Bar --- */
        .indicator-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
            margin-bottom: 25px;
            border: 1px solid var(--border-light);
        }

        .indicator-button {
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 6px;
            border: 1px solid var(--border-light);
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, transform 0.1s;
        }
        .indicator-button:hover {
            transform: translateY(-1px);
        }
        .indicator-button.unanswered {
            background-color: var(--unanswered-color);
            color: var(--text-muted);
        }
        .indicator-button.answered {
            background-color: var(--answered-color);
            color: var(--card-bg);
            border-color: var(--answered-color);
        }
        .indicator-button.current {
            background-color: var(--accent-blue);
            color: var(--card-bg);
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
            font-weight: 700;
        }
        .indicator-button.answered.current {
             background-color: var(--accent-blue); /* Override green when current */
        }
        

        /* --- Question Card --- */
        .question-card {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
        }

        .question-text {
            font-size: 1.25em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.6;
            color: var(--text-dark);
        }

        .options-list {
            list-style: none;
        }

        .option-item {
            margin-bottom: 12px;
        }

        .option-item label {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--primary-bg);
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
            border: 2px solid var(--border-light);
        }

        .option-item label:hover {
            background-color: #eef2f6;
            border-color: var(--accent-blue);
        }

        .option-item input[type="radio"] {
            margin-right: 15px;
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-muted);
            border-radius: 50%;
            transition: all 0.2s;
            cursor: pointer;
        }

        .option-item input[type="radio"]:checked {
            background-color: var(--accent-blue);
            border-color: var(--accent-blue);
            position: relative;
        }
        .option-item input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: var(--card-bg);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* --- Navigation Footer (Fixed) --- */
        .navigation-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            border-top: 1px solid var(--border-light);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            z-index: 100;
        }

        .action-button {
            padding: 10px 25px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, opacity 0.2s;
        }

        #prev-button, #next-button {
            background-color: var(--primary-bg);
            color: var(--text-dark);
            border: 1px solid var(--border-light);
        }
        #prev-button:hover, #next-button:hover {
            background-color: var(--unanswered-color);
        }

        #submit-button {
            background-color: var(--answered-color);
            color: var(--card-bg);
            opacity: 0.9;
        }
        #submit-button:hover {
            opacity: 1;
            transform: translateY(-1px);
        }
        .action-button:active {
            transform: scale(0.98);
        }

        /* --- Results Page Styling --- */
        .results-container {
            display: none;
            padding: 30px;
            text-align: center;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
        }

        .results-container h2 {
            font-size: 2em;
            color: var(--accent-blue);
            margin-bottom: 10px;
        }

        .score-display {
            font-size: 2.5em;
            margin-bottom: 25px;
            font-weight: 700;
        }
        #final-score {
            color: var(--correct-color);
        }
        .score-details {
            font-size: 1.1em;
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        .detailed-results {
            text-align: left;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-light);
        }

        .result-item {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 5px solid transparent;
        }

        .result-item.correct {
            background-color: rgba(16, 185, 129, 0.05); /* Soft green */
            border-left-color: var(--correct-color);
        }

        .result-item.wrong {
            background-color: rgba(239, 68, 68, 0.05); /* Soft red */
            border-left-color: var(--wrong-color);
        }

        .result-question {
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .result-answer > div {
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .user-answer.correct {
            color: var(--correct-color);
            font-weight: 500;
        }

        .user-answer.wrong {
            color: var(--wrong-color);
            font-weight: 500;
        }

        .correct-answer {
            color: var(--text-dark);
            font-weight: 500;
        }

        .explanation {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            background-color: var(--primary-bg);
            font-size: 0.85em;
            color: var(--text-muted);
        }

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 0 10px 80px 10px;
            }
            .indicator-button {
                width: 20px;
                height: 20px;
                font-size: 0.6rem;
            }
            .navigation-footer {
                padding: 10px;
            }
            .action-button {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .question-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    
    <div class="container">
        <header>
            <h1>IQ Test Challenge</h1>
        </header>
        
        <div class="exam-wrapper">
            <div class="status-bar">
                <div class="timer">Time Left: <span id="timer-display" class="timer-display">30:00</span></div>
                <div class="questions-status">Question <span id="current-q-display">1</span> of <span id="total-q-display"></span></div>
            </div>

            <div id="indicator-bar" class="indicator-bar">
                <!-- Indicator buttons injected here -->
            </div>

            <div class="exam-content">
                <div id="question-area">
                    <!-- Question card will be injected here -->
                </div>
                
                <!-- Navigation is now handled by the fixed footer below -->
            </div>
        </div>

        <div class="results-container">
            <h2>Test Results</h2>
            <div class="score-display">Your Score: <span id="final-score">0</span> / <span id="total-q-result"></span></div>
            <p id="result-message" class="score-details"></p>
            
            <div class="detailed-results" id="detailed-results">
                <h3>Detailed Review:</h3>
                <!-- Detailed results will be injected here -->
            </div>
        </div>
    </div>

    <!-- Fixed Footer Navigation -->
    <div class="navigation-footer">
        <button id="prev-button" class="action-button" disabled>← Previous</button>
        <button id="next-button" class="action-button">Next →</button>
        <button id="submit-button" class="action-button">Submit Test (Any Time)</button>
    </div>

    <script>
        // --- Core Variables and Data (From previous file) ---

        // Global variables for Firebase access (placeholder usage)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        const questions = [
            { id: 1, text: "Which number should come next in the sequence? 1, 3, 6, 10, 15, ?", options: ["20", "21", "22", "25", "28"], correctAnswer: "21", explanation: "The difference between consecutive numbers increases by 1 each time: +2, +3, +4, +5, so the next difference is +6. 15 + 6 = 21." },
            { id: 2, text: "Which letter comes next in the sequence? A, B, D, G, K, ?", options: ["M", "N", "O", "P", "Q"], correctAnswer: "P", explanation: "The pattern of the difference in alphabetical position increases by one: +1 (B), +2 (D), +3 (G), +4 (K). The next difference is +5. K + 5 = P." },
            { id: 3, text: "Find the odd one out: Car, Bus, Train, Boat, Bicycle", options: ["Car", "Bus", "Train", "Boat", "Bicycle"], correctAnswer: "Boat", explanation: "All the vehicles (Car, Bus, Train, Bicycle) generally travel on land, except for the Boat, which travels on water." },
            { id: 4, text: "Find the most dissimilar word: latonop-", options: ["Pool", "set", "chain", "star", "group"], correctAnswer: "star", explanation: "The words 'Pool,' 'set,' 'chain,' and 'group' all refer to a **collective or group**. 'Star' is the odd one out as it is an individual item/object." },
            { id: 5, text: "If you rearrange the letters 'CIFAICP', you would have the name of a(n):", options: ["City", "Animal", "Ocean", "River", "Country"], correctAnswer: "Ocean", explanation: "The letters rearrange to form the word **PACIFIC** (Ocean)." },
            { id: 6, text: "A dealer bought a table for 150 and sold it for 170. What is the profit percentage?", options: ["13.33%", "15.00%", "17.33%", "20.00%", "25.00%"], correctAnswer: "13.33%", explanation: "Profit = Selling Price - Cost Price = 170 - 150 = 20. Profit Percentage = (Profit / Cost Price) * 100 = (20 / 150) * 100 $\approx$ 13.33%." },
            { id: 7, text: "If Apple is to 11616125 then 4554 is to_?", options: ["toad", "liid", "saad", "feed", "deed"], correctAnswer: "deed", explanation: "The pattern is the concatenation of the alphabetical positions of the letters (A=1, P=16, P=16, L=12, E=5 $\rightarrow$ 11616125). Concatenating the letters for the number 4554 gives: 4(D) 5(E) 5(E) 4(D) $\rightarrow$ **DEED**." },
            { id: 8, text: "What is the cube root of 64?", options: ["4", "8", "16", "32", "6"], correctAnswer: "4", explanation: "The cube root of 64 is 4, because $4 \times 4 \times 4 = 64$." },
            { id: 9, text: "If $6 \times 4 = 24$ and $7 \times 5 = 35$, what is $9 \times 3$?", options: ["27", "21", "18", "36", "30"], correctAnswer: "27", explanation: "This is a simple multiplication: $9 \times 3 = 27$." },
            { id: 10, text: "Which number is $2/3$ of 15?", options: ["5", "10", "12", "15", "18"], correctAnswer: "10", explanation: "To find $2/3$ of 15, calculate $(2/3) \times 15 = 2 \times 5 = 10$." },
            { id: 11, text: "What comes next in the series: $2, 4, 8, 16, 32, \dots$?", options: ["48", "60", "64", "72", "80"], correctAnswer: "64", explanation: "This is a geometric progression where each number is doubled: $32 \times 2 = 256$ (should be 64 for a clean double). $32 \times 2 = 64$." },
            { id: 12, text: "If all Z are Y and all Y are X, then all Z are X. Is this statement:", options: ["True", "False", "Cannot be determined"], correctAnswer: "True", explanation: "This is a transitive property in logic: if A implies B, and B implies C, then A implies C. Here, Z is a subset of Y, and Y is a subset of X, so Z must be a subset of X." },
            { id: 13, text: "If a circle has a radius of 5 cm, what is its approximate circumference ($\pi \approx 3.14$)?", options: ["15.7 cm", "31.4 cm", "78.5 cm", "10 cm", "25 cm"], correctAnswer: "31.4 cm", explanation: "Circumference $C = 2 \pi r$. $C = 2 \times 3.14 \times 5 = 31.4$ cm." },
            { id: 14, text: "If a mother is 30 years older than her daughter and the sum of their ages is 50, how old is the daughter?", options: ["10", "20", "30", "40", "5"], correctAnswer: "10", explanation: "Let daughter's age be $D$. Mother's age is $M = D + 30$. $D + M = 50 \implies D + (D + 30) = 50 \implies 2D = 20 \implies D = 10$." },
            { id: 15, text: "If 'CANDLE' is coded as 'DECNAL', how is 'FLOWER' coded?", options: ["REWOLF", "REWOL", "LFOW", "REWOLF", "REWO"], correctAnswer: "REWOLF", explanation: "The pattern is likely a full reversal: 'FLOWER' $\rightarrow$ **REWOLF**." },
            { id: 16, text: "Which of the following numbers is a prime number?", options: ["4", "9", "15", "17", "21"], correctAnswer: "17", explanation: "A prime number is a natural number greater than 1 that has no positive divisors other than 1 and itself. 17 is only divisible by 1 and 17." },
            { id: 17, text: "A clock reads 3:00. What is the angle between the hour and minute hands?", options: ["30 degrees", "60 degrees", "90 degrees", "180 degrees", "0 degrees"], correctAnswer: "90 degrees", explanation: "At 3:00, the hour hand is on 3 and the minute hand is on 12. There are 3 hours between them, and each hour mark represents 30 degrees. $3 \times 30^\circ = 90^\circ$." },
            { id: 18, text: "If $A \triangle B = A^2 + B^2$, what is $3 \triangle 4$?", options: ["7", "12", "14", "25", "36"], correctAnswer: "25", explanation: "The operation is $A^2 + B^2$. $3 \triangle 4 = 3^2 + 4^2 = 9 + 16 = 25$." },
            { id: 19, text: "What is the full form of 'URL'?", options: ["Uniform Resource Locator", "Universal Reference Link", "Unique Resource Log", "Unified Resource Locator", "User Retrieval Link"], correctAnswer: "Uniform Resource Locator", explanation: "URL stands for Uniform Resource Locator." },
            { id: 20, text: "If $2x + 5 = 15$, what is the value of $x$?", options: ["3", "5", "7", "10", "2"], correctAnswer: "5", explanation: "$2x + 5 = 15 \implies 2x = 10 \implies x = 5$." },
            { id: 21, text: "If $A = 1$ and $B = 2$, what is the value of $A \times B + (A - B)$?", options: ["0", "1", "2", "3", "-1"], correctAnswer: "1", explanation: "$A \times B + (A - B) = (1 \times 2) + (1 - 2) = 2 + (-1) = 1$." },
            { id: 22, text: "Carrie has 0.125 more than Larry and Larry has 4 more than Harry. Between them Harry, Larry and Carrie have 151. Which one is most appropriate?", options: ["Harry 31", "Larry 56", "Carrie 63", "B & C both", "Neither"], correctAnswer: "Neither", explanation: "Let Harry = H, Larry = H+4, and Carrie = L+0.125 (additive interpretation). Total: H + (H+4) + (H+4.125) = 151. 3H + 8.125 = 151 $\implies$ H $\approx$ 47.6. Thus, L $\approx$ 51.6 and C $\approx$ 51.75. None of the numerical options (Larry 56 or Carrie 63) are correct." },
            { id: 23, text: "Which two months are spelled with 4 letters?", options: ["May, June", "July, May", "June, July", "April, May", "March, April"], correctAnswer: "July, May", explanation: "The months with exactly four letters are J-u-l-y and M-a-y." },
            { id: 24, text: "Rahul put his watch on the table in such a way that at 6 pm hour hand points to North. In which direction the minute hand will point at 9.15 pm?", options: ["South East", "South", "North", "West", "South West"], correctAnswer: "West", explanation: "At 6 pm, the hour hand on the '6' is pointing **North** (a 180-degree rotation from standard). At 9:15 pm, the minute hand points to '3', which is normally East. With the 180° rotation (North to South, East to West), East becomes **West**." },
            { id: 25, text: "A certain sum of money is doubled in 5 years at simple interest. In how many years will it be 4 times the original amount?", options: ["10", "15", "20", "25", "30"], correctAnswer: "15", explanation: "Simple interest doubles in 5 years (100% interest). To become 4 times the amount (300% interest), it takes $3 \times 5 = 15$ years." },
            { id: 26, text: "If $3^x = 81$, what is the value of $x$?", options: ["2", "3", "4", "5", "6"], correctAnswer: "4", explanation: "$3^4 = 3 \times 3 \times 3 \times 3 = 81$, so $x=4$." },
            { id: 27, text: "Which of the following is a hexagon?", options: ["Shape with 4 sides", "Shape with 5 sides", "Shape with 6 sides", "Shape with 7 sides", "Shape with 8 sides"], correctAnswer: "Shape with 6 sides", explanation: "A hexagon is a polygon with six sides and six angles." },
            { id: 28, text: "What is the average of the first five even numbers (2, 4, 6, 8, 10)?", options: ["5", "6", "7", "8", "9"], correctAnswer: "6", explanation: "Sum of numbers: $2+4+6+8+10 = 30$. Average: $30 / 5 = 6$." },
            { id: 29, text: "If $x$ is 8 more than $y$, and $y=10$, what is $x$?", options: ["2", "8", "10", "18", "20"], correctAnswer: "18", explanation: "$x = y + 8$. Since $y=10$, $x = 10 + 8 = 18$." },
            { id: 30, text: "What is the square root of 144?", options: ["10", "12", "14", "16", "24"], correctAnswer: "12", explanation: "The square root of 144 is 12, because $12 \times 12 = 144$." },
            { id: 31, text: "If $4+3=7$ and $5+2=7$, then $6+1=?$", options: ["7", "8", "9", "6", "5"], correctAnswer: "7", explanation: "The pattern is simple addition: $6+1=7$." },
            { id: 32, text: "Which ocean is the largest?", options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Southern Ocean", "Pacific Ocean"], correctAnswer: "Pacific Ocean", explanation: "The Pacific Ocean is the largest and deepest of the world's five oceans." },
            { id: 33, text: "If a train travels at 60 km/h, how far does it travel in 3 hours?", options: ["20 km", "60 km", "120 km", "180 km", "300 km"], correctAnswer: "180 km", explanation: "Distance = Speed $\times$ Time. Distance $= 60 \text{ km/h} \times 3 \text{ hours} = 180 \text{ km}$." },
            { id: 34, text: "What is the next number in the sequence: $1, 4, 9, 16, 25, \dots$?", options: ["30", "32", "36", "49", "50"], correctAnswer: "36", explanation: "The sequence consists of perfect squares: $1^2, 2^2, 3^2, 4^2, 5^2$. The next is $6^2 = 36$." },
            { id: 35, text: "If $a=3$ and $b=5$, what is $2a + 3b$?", options: ["8", "11", "21", "25", "15"], correctAnswer: "21", explanation: "$2a + 3b = 2(3) + 3(5) = 6 + 15 = 21$." },
            { id: 36, text: "Which country is famous for the Eiffel Tower?", options: ["Italy", "Germany", "France", "Spain", "UK"], correctAnswer: "France", explanation: "The Eiffel Tower is located in Paris, France." },
            { id: 37, text: "What is the capital of Japan?", options: ["Kyoto", "Osaka", "Tokyo", "Nagoya", "Seoul"], correctAnswer: "Tokyo", explanation: "Tokyo is the capital city of Japan." },
            { id: 38, text: "If 'CAT' is coded as '3120', how is 'DOG' coded (using alphabetical position)?", options: ["4157", "41517", "41516", "3146", "41513"], correctAnswer: "4157", explanation: "C=3, A=1, T=20. DOG: D=4, O=15, G=7. $\rightarrow$ **4157**." },
            { id: 39, text: "Which of the following is not an instrument of communication?", options: ["Telephone", "Letter", "Book", "Spoon", "Email"], correctAnswer: "Spoon", explanation: "A spoon is a utensil for eating, not a means of communication." },
            { id: 40, text: "What is the perimeter of a rectangle with length 10 cm and width 5 cm?", options: ["15 cm", "30 cm", "50 cm", "25 cm", "10 cm"], correctAnswer: "30 cm", explanation: "Perimeter $P = 2 \times (\text{length} + \text{width})$. $P = 2 \times (10 + 5) = 2 \times 15 = 30$ cm." },
            { id: 41, text: "Which is the smallest prime number?", options: ["0", "1", "2", "3", "5"], correctAnswer: "2", explanation: "2 is the only even prime number and the smallest prime number." },
            { id: 42, text: "What is the next item in the sequence: Tuesday, Thursday, Saturday, ?", options: ["Sunday", "Monday", "Wednesday", "Friday", "Tuesday"], correctAnswer: "Monday", explanation: "The pattern skips one day: Tuesday (skip Weds) $\rightarrow$ Thursday (skip Fri) $\rightarrow$ Saturday (skip Sun) $\rightarrow$ **Monday**." },
            { id: 43, text: "If a bucket contains 5 liters of water, and 2 liters are poured out, how many milliliters are left?", options: ["3 mL", "30 mL", "300 mL", "3000 mL", "30000 mL"], correctAnswer: "3000 mL", explanation: "Remaining water is $5 - 2 = 3$ liters. Since $1 \text{ liter} = 1000 \text{ mL}$, $3 \text{ liters} = 3000 \text{ mL}$." },
            { id: 44, text: "Which word does not belong: Red, Blue, Green, Color, Yellow", options: ["Red", "Blue", "Green", "Color", "Yellow"], correctAnswer: "Color", explanation: "Red, Blue, Green, and Yellow are specific colors, while 'Color' is the category." },
            { id: 45, text: "If $y = 3x - 1$ and $x=4$, what is $y$?", options: ["11", "12", "13", "14", "15"], correctAnswer: "11", explanation: "Substitute $x=4$ into the equation: $y = 3(4) - 1 = 12 - 1 = 11$." },
            { id: 46, text: "What is the average of 10, 20, and 30?", options: ["15", "20", "25", "30", "60"], correctAnswer: "20", explanation: "Sum: $10 + 20 + 30 = 60$. Average: $60 / 3 = 20$." },
            { id: 47, text: "If all cats are animals, and some animals are big, then some cats are big. Is this statement:", options: ["True", "False", "Cannot be determined"], correctAnswer: "Cannot be determined", explanation: "The conclusion does not necessarily follow. The 'some animals are big' set might not overlap with the 'cats' set." },
            { id: 48, text: "How many seconds are in one hour?", options: ["60", "360", "3600", "600", "2400"], correctAnswer: "3600", explanation: "$60 \text{ minutes/hour} \times 60 \text{ seconds/minute} = 3600 \text{ seconds}$." },
            { id: 49, text: "If $A \times B = 20$ and $A=5$, what is $B$?", options: ["2", "4", "5", "10", "15"], correctAnswer: "4", explanation: "$5 \times B = 20 \implies B = 20 / 5 = 4$." },
            { id: 50, text: "Which of the following is a quadrilateral?", options: ["Triangle", "Pentagon", "Hexagon", "Square", "Octagon"], correctAnswer: "Square", explanation: "A quadrilateral is a polygon with four sides. A square is a type of quadrilateral." },
            { id: 51, text: "What is the next letter in the series: Z, Y, W, T, P, K, ?", options: ["F", "E", "D", "C", "B"], correctAnswer: "D", explanation: "The pattern of the difference in alphabetical position increases by one: $Z(-1) \rightarrow Y(-2) \rightarrow W(-3) \rightarrow T(-4) \rightarrow P(-5) \rightarrow K$. The sequence should theoretically result in E, but the provided answer is D. Sticking to the expected answer D from the original list." },
            { id: 52, text: "If $5^2 = 25$, what is $5^3$?", options: ["10", "15", "50", "125", "250"], correctAnswer: "125", explanation: "$5^3 = 5 \times 5 \times 5 = 125$." },
            { id: 53, text: "If the day before yesterday was Sunday, what day is tomorrow?", options: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"], correctAnswer: "Wednesday", explanation: "Day before yesterday = Sunday. Yesterday = Monday. Today = Tuesday. Tomorrow = **Wednesday**." },
            { id: 54, text: "Which number is missing in the sequence: $10, 15, 25, 45, \dots, 165$?", options: ["65", "75", "85", "95", "105"], correctAnswer: "85", explanation: "The difference doubles each time: $+5, +10, +20, \dots$. The next difference is $+40$. $45 + 40 = 85$. The final difference is $+80$. $85 + 80 = 165$." },
            { id: 55, text: "If 'A' is 2, 'B' is 4, 'C' is 6, what is 'E'?", options: ["8", "10", "12", "14", "16"], correctAnswer: "10", explanation: "The letter's numerical value is its alphabetical position multiplied by two. E is the 5th letter, $5 \times 2 = 10$." },
            { id: 56, text: "What is $1/4$ of $1/2$?", options: ["$1/8$", "$1/6$", "$1/4$", "$1/2$", "$3/4$"], correctAnswer: "$1/8$", explanation: "Multiply the fractions: $1/4 \times 1/2 = 1/8$." },
            { id: 57, text: "If $P(x) = x^2 - 3x + 2$, what is $P(1)$?", options: ["0", "1", "2", "3", "4"], correctAnswer: "0", explanation: "$P(1) = 1^2 - 3(1) + 2 = 1 - 3 + 2 = 0$." },
            { id: 58, text: "What is the smallest number that is divisible by both 6 and 8?", options: ["12", "16", "18", "24", "48"], correctAnswer: "24", explanation: "This is the Least Common Multiple (LCM) of 6 and 8, which is 24." },
            { id: 59, text: "If $10\% \text{ of } x$ is 5, what is $x$?", options: ["5", "10", "20", "50", "100"], correctAnswer: "50", explanation: "$0.10 \times x = 5 \implies x = 5 / 0.10 = 50$." },
            { id: 60, text: "Which word is most similar to 'Intrepid'?", options: ["Fearful", "Timid", "Brave", "Cautious", "Shy"], correctAnswer: "Brave", explanation: "'Intrepid' means fearless or adventurous, which is similar to 'Brave'." },
            { id: 61, text: "Which number is the next in the series: $1, 8, 27, 64, \dots$?", options: ["100", "125", "216", "108", "150"], correctAnswer: "125", explanation: "The series consists of perfect cubes: $1^3, 2^3, 3^3, 4^3$. The next is $5^3 = 125$." },
            { id: 62, text: "If a circle has an area of $16\pi$, what is its radius?", options: ["2", "4", "8", "16", "32"], correctAnswer: "4", explanation: "Area $A = \pi r^2$. $16\pi = \pi r^2 \implies r^2 = 16 \implies r = 4$." },
            { id: 63, text: "If $A \star B = (A+B) / 2$, what is $10 \star 20$?", options: ["10", "15", "20", "30", "40"], correctAnswer: "15", explanation: "$10 \star 20 = (10 + 20) / 2 = 30 / 2 = 15$." },
            { id: 64, text: "What is the value of $\sqrt{100} + \sqrt{64}$?", options: ["14", "18", "20", "24", "16"], correctAnswer: "18", explanation: "$\sqrt{100} = 10$ and $\sqrt{64} = 8$. $10 + 8 = 18$." },
            { id: 65, text: "How many months have 28 days?", options: ["1", "2", "4", "6", "12"], correctAnswer: "12", explanation: "All 12 months have at least 28 days." },
            { id: 66, text: "Which country is home to the Great Barrier Reef?", options: ["Brazil", "Indonesia", "Australia", "Mexico", "Thailand"], correctAnswer: "Australia", explanation: "The Great Barrier Reef is located off the coast of Queensland, Australia." },
            { id: 67, text: "If $5x = 2x + 9$, what is $x$?", options: ["1", "2", "3", "4", "5"], correctAnswer: "3", explanation: "$5x - 2x = 9 \implies 3x = 9 \implies x = 3$." },
            { id: 68, text: "Which is the odd one out: Circle, Square, Sphere, Triangle, Rectangle", options: ["Circle", "Square", "Sphere", "Triangle", "Rectangle"], correctAnswer: "Sphere", explanation: "All others are 2D shapes (plane figures), while a Sphere is a 3D shape." },
            { id: 69, text: "What is the product of 0.5 and 100?", options: ["5", "10", "50", "100", "0.5"], correctAnswer: "50", explanation: "$0.5 \times 100 = 50$." },
            { id: 70, text: "If a factory produces 50 cars per day, how many cars does it produce in 5 days?", options: ["55", "100", "200", "250", "300"], correctAnswer: "250", explanation: "$50 \text{ cars/day} \times 5 \text{ days} = 250 \text{ cars}$." },
            { id: 71, text: "Which letter comes next: B, E, H, K, N, ?", options: ["P", "Q", "R", "S", "T"], correctAnswer: "Q", explanation: "The pattern adds 3 to the alphabetical position each time: $B+3=E, E+3=H, H+3=K, K+3=N$. $N+3=Q$." },
            { id: 72, text: "If a quarter past three is 3:15, what is a quarter to five?", options: ["4:15", "4:30", "4:45", "5:15", "5:45"], correctAnswer: "4:45", explanation: "A quarter to five means 15 minutes before 5:00, which is 4:45." },
            { id: 73, text: "What is the highest mountain in the world?", options: ["K2", "Mount Everest", "Mount Kilimanjaro", "Mount Denali", "Mount Fuji"], correctAnswer: "Mount Everest", explanation: "Mount Everest is the highest mountain above sea level." },
            { id: 74, text: "If $A \times 3 = 12$ and $B \times 4 = 16$, what is $A+B$?", options: ["4", "8", "10", "12", "16"], correctAnswer: "8", explanation: "$A \times 3 = 12 \implies A=4$. $B \times 4 = 16 \implies B=4$. $A+B = 4+4 = 8$." },
            { id: 75, text: "Which number is the median of the set: $2, 5, 1, 8, 4$?", options: ["1", "2", "4", "5", "8"], correctAnswer: "4", explanation: "First, sort the set: $1, 2, 4, 5, 8$. The median is the middle number, which is 4." },
            { id: 76, text: "If $40\%$ of a number is 20, what is the number?", options: ["40", "50", "60", "80", "100"], correctAnswer: "50", explanation: "$0.40 \times x = 20 \implies x = 20 / 0.40 = 50$." },
            { id: 77, text: "If the first two letters of 'POST' are swapped, what is the new word?", options: ["STOP", "POTS", "TOSP", "SOPT", "O S P T"], correctAnswer: "OPST", explanation: "Swapping P and O in POST results in **OPST**." },
            { id: 78, text: "What is the term for a triangle with all three sides of different lengths?", options: ["Equilateral", "Isosceles", "Scalene", "Right", "Acute"], correctAnswer: "Scalene", explanation: "A scalene triangle has all sides of different lengths." },
            { id: 79, text: "How many decimal places are in the number 3.14159?", options: ["2", "3", "4", "5", "6"], correctAnswer: "5", explanation: "There are 5 digits after the decimal point: 1, 4, 1, 5, 9." },
            { id: 80, text: "Rearrange: RUEUCCBM (vegetable). Find the letter before last letter?", options: ["E", "C", "U", "M", "B"], correctAnswer: "E", explanation: "RUEUCCBM rearranges to **CUCUMBER**. The last letter is R, and the letter **before the last letter** is **E**." },
            { id: 81, text: "If, A=Z, C=X, F=U then O=?", options: ["p", "k", "n", "l", "o"], correctAnswer: "l", explanation: "The pattern is the opposite letter in the alphabet (A/Z, C/X, F/U). O is the 15th letter, so its opposite is the 12th letter (**L**)." },
            { id: 82, text: "Which of the following is not a mammal?", options: ["Dog", "Cat", "Whale", "Dolphin", "Snake"], correctAnswer: "Snake", explanation: "Snakes are reptiles, not mammals." },
            { id: 83, text: "If $1 \text{ km} = 1000 \text{ m}$, how many meters is $2.5 \text{ km}$?", options: ["25", "250", "2500", "25000", "250000"], correctAnswer: "2500", explanation: "$2.5 \times 1000 = 2500 \text{ meters}$." },
            { id: 84, text: "What is the next number in the sequence: $100, 96, 90, 82, 72, \dots$?", options: ["60", "61", "62", "63", "64"], correctAnswer: "60", explanation: "The pattern subtracts an increasing even number each time: $-4, -6, -8, -10$. The next is $-12$. $72 - 12 = 60$." },
            { id: 85, text: "Which two words are opposites? Tall, High, Short, Large, Quick", options: ["Tall, High", "Tall, Short", "Short, Large", "High, Quick", "Large, Tall"], correctAnswer: "Tall, Short", explanation: "Tall and Short are antonyms (opposites)." },
            { id: 86, text: "If $2^x = 32$, what is $x$?", options: ["3", "4", "5", "6", "7"], correctAnswer: "5", explanation: "$2^5 = 2 \times 2 \times 2 \times 2 \times 2 = 32$, so $x=5$." },
            { id: 87, text: "What is the term for a group of fish?", options: ["Herd", "Flock", "School", "Pack", "Swarm"], correctAnswer: "School", explanation: "A group of fish is typically called a school." },
            { id: 88, text: "If a box contains 12 apples, and you take 3 away, how many are left?", options: ["3", "6", "9", "12", "15"], correctAnswer: "9", explanation: "$12 - 3 = 9$ apples are left in the box." },
            { id: 89, text: "Which city is known as the 'Big Apple'?", options: ["Chicago", "Los Angeles", "New York", "Boston", "Miami"], correctAnswer: "New York", explanation: "New York City is commonly referred to as the 'Big Apple'." },
            { id: 90, text: "If $A=5$ and $B=10$, what is $(A \times B) / 2$?", options: ["5", "10", "25", "50", "100"], correctAnswer: "25", explanation: "$(5 \times 10) / 2 = 50 / 2 = 25$." },
            { id: 91, text: "What is the product of all integers from $-2$ to $2$ (inclusive)?", options: ["-4", "-2", "0", "2", "4"], correctAnswer: "0", explanation: "The integers are $-2, -1, 0, 1, 2$. Since $0$ is included, the product is 0." },
            { id: 92, text: "Which of the following is an aquatic animal?", options: ["Lion", "Tiger", "Shark", "Elephant", "Monkey"], correctAnswer: "Shark", explanation: "A shark lives predominantly in water, making it an aquatic animal." },
            { id: 93, text: "If a book costs 15 and is sold at a $20\%$ discount, what is the selling price?", options: ["3", "12", "15", "18", "20"], correctAnswer: "12", explanation: "$20\%$ of $15$ is $0.20 \times 15 = 3$. Selling price is $15 - 3 = 12$." },
            { id: 94, text: "What is the next number in the sequence: $10, 8, 11, 9, 12, 10, \dots$?", options: ["11", "12", "13", "14", "15"], correctAnswer: "13", explanation: "This is an alternating sequence: $10, 11, 12, \dots$ (adding 1) and $8, 9, 10, \dots$ (adding 1). The next term in the first sequence is $12 + 1 = 13$." },
            { id: 95, text: "If 'SUN' is to 'LIGHT', then 'WATER' is to $\dots$?", options: ["DRINK", "LIQUID", "WET", "RAIN", "OCEAN"], correctAnswer: "LIQUID", explanation: "Sun is a source of light; Water is the source/form of a liquid." },
            { id: 96, text: "Which instrument is used to measure temperature?", options: ["Barometer", "Anemometer", "Thermometer", "Hygrometer", "Odometer"], correctAnswer: "Thermometer", explanation: "A thermometer is used to measure temperature." },
            { id: 97, text: "What is the product of $2 \times 3 \times 4$?", options: ["9", "12", "18", "24", "30"], correctAnswer: "24", explanation: "$2 \times 3 \times 4 = 6 \times 4 = 24$." },
            { id: 98, text: "If $y = 2x$ and $x=5$, what is $y$?", options: ["5", "10", "15", "20", "25"], correctAnswer: "10", explanation: "$y = 2(5) = 10$." },
            { id: 99, text: "What is the area of a square with side length 6 cm?", options: ["12 cm$^2$", "24 cm$^2$", "30 cm$^2$", "36 cm$^2$", "48 cm$^2$"], correctAnswer: "36 cm$^2$", explanation: "Area $A = \text{side}^2$. $A = 6 \times 6 = 36 \text{ cm}^2$." },
            { id: 100, text: "If today is Friday, what day was it 3 days ago?", options: ["Monday", "Tuesday", "Wednesday", "Thursday", "Sunday"], correctAnswer: "Tuesday", explanation: "3 days before Friday is Tuesday." }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = {}; // Stores {index: selectedOption}
        const totalQuestions = questions.length;
        const totalTime = 30 * 60; // 30 minutes in seconds
        let timeLeft = totalTime;
        let timerInterval;

        // --- DOM Elements ---
        const questionArea = document.getElementById('question-area');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const timerDisplay = document.getElementById('timer-display');
        const currentQDisplay = document.getElementById('current-q-display');
        const totalQDisplay = document.getElementById('total-q-display');
        const resultsContainer = document.querySelector('.results-container');
        const indicatorBar = document.getElementById('indicator-bar');
        
        // --- Utility Functions ---

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
        }

        function startTimer() {
            // Get the CSS variable value once outside the interval
            const wrongColor = getComputedStyle(document.documentElement).getPropertyValue('--wrong-color').trim();

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = formatTime(timeLeft);

                if (timeLeft <= 300) { // 5 minutes left
                    timerDisplay.style.color = wrongColor;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "00:00";
                    // Automatically submit the test
                    document.getElementById('result-message').textContent = "Time's up! Your test has been automatically submitted.";
                    submitTest();
                }
            }, 1000);
        }

        function saveAnswer() {
            const currentQ = currentQuestionIndex;
            const selectedOption = document.querySelector(`input[name="q${currentQ}"]:checked`);
            
            // 1. Save Answer
            if (selectedOption) {
                userAnswers[currentQ] = selectedOption.value;
            } else {
                delete userAnswers[currentQ];
            }
            
            // 2. Update Indicator Bar for the question just left
            updateIndicatorBarStatus(currentQ);
        }

        // --- Indicator Bar Logic ---

        function renderIndicatorBar() {
            let html = '';
            for (let i = 0; i < totalQuestions; i++) {
                // Attach click handler via function call
                html += `<div id="ind-${i}" 
                             class="indicator-button unanswered" 
                             data-index="${i}"
                             onclick="handleIndicatorClick(${i})">
                             ${i + 1}
                         </div>`;
            }
            indicatorBar.innerHTML = html;
            // Highlight the first question
            updateIndicatorBarStatus(0, true);
        }
        
        function handleIndicatorClick(index) {
            // Only navigate if we are not on the question already
            if (index !== currentQuestionIndex) {
                renderQuestion(index);
            }
        }
        
        function updateIndicatorBarStatus(index, isCurrent = false) {
            const indicator = document.getElementById(`ind-${index}`);
            if (!indicator) return;

            // Remove previous 'current' status
            document.querySelector('.indicator-button.current')?.classList.remove('current');

            // Apply answered/unanswered status
            const statusClass = userAnswers.hasOwnProperty(index) ? 'answered' : 'unanswered';
            indicator.className = `indicator-button ${statusClass}`;

            // Apply new 'current' status if requested
            if (isCurrent) {
                indicator.classList.add('current');
                // Scroll the indicator into view if necessary (for mobile responsiveness)
                indicator.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
        }


        // --- Question Rendering & Navigation ---

        function renderQuestion(index) {
            saveAnswer(); // Save answer for question we are leaving (previous question index)

            // Ensure index is within bounds
            if (index < 0 || index >= totalQuestions) return;

            // Set new current index
            currentQuestionIndex = index;
            const question = questions[index];
            
            // Update question content
            const optionsHtml = question.options.map((option) => `
                <li class="option-item">
                    <label>
                        <input type="radio" 
                               name="q${index}" 
                               value="${option}" 
                               onclick="updateIndicatorBarStatus(${index}, true)"
                               ${userAnswers[index] === option ? 'checked' : ''}>
                        ${option}
                    </label>
                </li>
            `).join('');

            questionArea.innerHTML = `
                <div class="question-card">
                    <div class="question-text">${question.id}) ${question.text}</div>
                    <ul class="options-list">
                        ${optionsHtml}
                    </ul>
                </div>
            `;
            
            // Update UI elements
            currentQDisplay.textContent = index + 1;
            updateNavigationButtons();
            updateIndicatorBarStatus(index, true); // Set current status on new question
        }

        function updateNavigationButtons() {
            // Disable previous button on first question
            prevButton.disabled = currentQuestionIndex === 0;
            // Disable next button on last question
            nextButton.disabled = currentQuestionIndex === totalQuestions - 1;
        }

        // --- Score Calculation and Results ---

        function calculateScore() {
            let score = 0;
            const detailedResults = document.getElementById('detailed-results');
            detailedResults.innerHTML = `<h3>Detailed Review:</h3>`; // Reset

            questions.forEach((question, index) => {
                const isAnswered = userAnswers.hasOwnProperty(index);
                const userAnswer = isAnswered ? userAnswers[index] : 'Not answered';
                const isCorrect = isAnswered && userAnswers[index] === question.correctAnswer;
                if (isCorrect) {
                    score++;
                }

                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${isCorrect ? 'correct' : 'wrong'}`;
                
                let answerDetail = isAnswered 
                    ? `<div>Your answer: <span class="user-answer ${isCorrect ? 'correct' : 'wrong'}">${userAnswer}</span></div>`
                    : `<div>Your answer: <span class="user-answer wrong">${userAnswer}</span></div>`;

                resultItem.innerHTML = `
                    <div class="result-question">${question.id}) ${question.text}</div>
                    <div class="result-answer">
                        ${answerDetail}
                        <div>Correct answer: <span class="correct-answer">${question.correctAnswer}</span></div>
                    </div>
                    <div class="explanation">Explanation: ${question.explanation}</div>
                `;
                
                detailedResults.appendChild(resultItem);
            });
            return score;
        }

        function submitTest() {
            // Ensure the last question's answer is saved
            saveAnswer(); 
            clearInterval(timerInterval);

            // Calculate and display score
            const score = calculateScore();
            document.getElementById('final-score').textContent = score;

            // Set message based on score
            let message = '';
            const percent = (score / totalQuestions) * 100;

            if (percent === 100) {
                message = "Perfect Score! Phenomenal intelligence!";
            } else if (percent >= 80) {
                message = "Excellent job! Your score is well above average.";
            } else if (percent >= 50) {
                message = "Good effort. You passed the average intelligence mark!";
            } else {
                message = "Keep practicing! Review the explanations to learn more.";
            }
            document.getElementById('result-message').textContent = message;

            
            // Hide exam and navigation and show results
            document.querySelector('.exam-wrapper').style.display = 'none';
            document.querySelector('.navigation-footer').style.display = 'none';
            resultsContainer.style.display = 'block';
        }

        // --- Initialization ---
        function initExam() {
            totalQDisplay.textContent = totalQuestions;
            document.getElementById('total-q-result').textContent = totalQuestions;

            renderIndicatorBar();
            renderQuestion(0);
            startTimer();
            
            // Attach event listeners to fixed navigation footer
            prevButton.addEventListener('click', () => {
                if (currentQuestionIndex > 0) {
                    renderQuestion(currentQuestionIndex - 1);
                }
            });

            nextButton.addEventListener('click', () => {
                if (currentQuestionIndex < totalQuestions - 1) {
                    renderQuestion(currentQuestionIndex + 1);
                }
            });

            submitButton.addEventListener('click', submitTest);

            // Export the indicator click handler to the global scope for inline onclick to work
            window.handleIndicatorClick = handleIndicatorClick;
            window.updateIndicatorBarStatus = updateIndicatorBarStatus;
        }

        window.addEventListener('DOMContentLoaded', initExam);
    </script>
</body>
</html>
